[mypy]
python_version = 3.11
ignore_missing_imports = True
warn_unused_ignores = True
warn_redundant_casts = True
warn_unreachable = True
warn_return_any = True
strict_equality = True
show_error_codes = True
pretty = True

# Strict pocket modules (incremental adoption)
[mypy-core.jwt_utils]
strict = True
[mypy-core.rate_limit]
strict = True
[mypy-core.audit]
strict = True
[mypy-core.db]
strict = True

# Strict pocket 2 (service layer)
[mypy-core.portion_recommendation_service]
strict = True
[mypy-core.menu_service]
strict = True
[mypy-core.service_metrics_service]
strict = True

# Strict pocket 3 (auth & feature flags)
[mypy-core.auth]
strict = True
[mypy-core.feature_flags]
strict = True

[mypy-core.importers.*]
strict = True
[mypy-core.importers.docx_importer]
ignore_errors = True  # legacy menu importer; exclude from Pocket 8 strict scope
[mypy-core.pagination]
strict = True

[mypy-core.deprecation]
strict = True

[mypy-core.limit_registry]
strict = True

[mypy-core.legacy_kommun_ui]
ignore_errors = True
[mypy-core.legacy_offshore_ui]
ignore_errors = True
[mypy-core.demo_views]
ignore_errors = True
[mypy-modules.*]
ignore_errors = True
[mypy-core.admin_api]
strict = True
[mypy-core.diet_api]
strict = True
[mypy-core.attendance_api]
ignore_errors = True
[mypy-core.import_api]
strict = True  # Import API now under strict type checking (pocket hardening)
[mypy-core.service_metrics_api]
strict = True
[mypy-core.portion_recommendation_api]
ignore_errors = True
[mypy-core.service_recommendation_api]
strict = True
[mypy-core.menu_api]
ignore_errors = True
[mypy-core.ui_blueprint]
ignore_errors = True
[mypy-core.notes_api]
ignore_errors = True
[mypy-core.tasks_api]
strict = True
[mypy-core.tasks_service]
strict = True

# Pocket 6 modules (errors / sessions / authz)
[mypy-core.app_errors]
strict = True
[mypy-core.app_sessions]
strict = True
[mypy-core.app_authz]
strict = True
[mypy-core.roles]
strict = True
[mypy-core.metrics]
strict = True
[mypy-core.metrics_logging]
strict = True
[mypy-core.deprecation_warn]
strict = True

# Pocket 7 rate limiter modules
[mypy-core.rate_limiter]
strict = True
[mypy-core.rate_limiter_noop]
strict = True
[mypy-core.rate_limiter_redis]
strict = True
[mypy-core.http_limits]
strict = True

# New audit persistence pockets
[mypy-core.audit_repo]
strict = True
[mypy-core.admin_audit_api]
strict = True

# Allow dynamic attributes added to Flask app instance
[mypy-core.app_factory]
implicit_reexport = True

[mypy-core.config]
ignore_errors = True
[mypy-core.turnus_service]
ignore_errors = True
[mypy-core.turnus_api]
ignore_errors = True
[mypy-core.tenant_metadata_service]
ignore_errors = True
[mypy-core.feature_service]
ignore_errors = True
[mypy-core.diet_service]
ignore_errors = True
[mypy-core.service_metrics_service]
[mypy-core.menu_service]
[mypy-core.portion_recommendation_service]
[mypy-core.menu_import_service]
ignore_errors = True
[mypy-core.openapi_ui]
ignore_errors = True
[mypy-core.inline_ui]
ignore_errors = True
[mypy-core.export_api]
ignore_errors = True

# Silence type checking on alembic migration scripts
[mypy-migrations.*]
disable_error_code = attr-defined
