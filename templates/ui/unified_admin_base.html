{% extends "_base.html" %}

{% block title %}{% if vm.site_name %}{{ vm.site_name }} Admin - Yuplan Unified{% else %}Admin - Yuplan Unified{% endif %}{% endblock %}

{% block head %}
<link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='img/logo-proposal.svg') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/unified_admin.css') }}">
{% endblock %}

{% block content %}
{% from 'includes/yuplan_header.html' import yuplan_header %}
{{ yuplan_header(current_user=session.get('username') or session.get('role')) }}

<div class="ua-root ua-theme-light">
  <aside class="admin-sidebar ua-sidebar" id="adminSidebar">
    <div class="ua-sidebar-logo">
      <span class="ua-logo-mark" aria-label="Yuplan logo">
        <img src="{{ url_for('static', filename='img/logo-proposal.svg') }}" alt="Yuplan" class="ua-logo-img">
      </span>
      <span class="ua-logo-text">Yuplan Admin</span>
    </div>
    <nav class="ua-nav" aria-label="Admin navigation">
      <a href="{{ url_for('ui.admin_dashboard') }}" class="ua-nav-item {% if request.endpoint == 'ui.admin_dashboard' %}ua-nav-item-active{% endif %}"><span class="nav-icon">ğŸ </span> Ã–versikt</a>
      <a href="{{ url_for('ui.admin_departments_list') }}" class="ua-nav-item {% if request.endpoint and 'admin_departments' in request.endpoint %}ua-nav-item-active{% endif %}"><span class="nav-icon">ğŸ¢</span> Avdelningar</a>
      <a href="{{ url_for('ui.admin_menu_import_list') }}" class="ua-nav-item {% if request.endpoint and 'admin_menu_import' in request.endpoint %}ua-nav-item-active{% endif %}"><span class="nav-icon">ğŸ“‹</span> Meny &amp; registrering</a>
      <a href="{{ url_for('ui.admin_specialkost_list') }}" class="ua-nav-item {% if request.endpoint and 'admin_specialkost' in request.endpoint %}ua-nav-item-active{% endif %}"><span class="nav-icon">ğŸ¥—</span> Specialkost</a>
      <a href="{{ url_for('ui.reports_weekly') }}" class="ua-nav-item {% if request.endpoint and 'reports_' in request.endpoint %}ua-nav-item-active{% endif %}"><span class="nav-icon">ğŸ“Š</span> Rapporter</a>
      <a href="{{ url_for('ui.weekview_ui') }}" class="ua-nav-item"><span class="nav-icon">ğŸ“…</span> Tillbaka till Veckovy</a>
    </nav>
  </aside>

  <div class="ua-shell">
    <header class="ua-topbar content-header">
      <div class="ua-topbar-main">
        <h1 class="ua-topbar-title">{% block admin_title %}Adminpanel{% endblock %}</h1>
        <p class="ua-topbar-subtitle">{% block admin_subtitle %}Hantera din Yuplan-miljÃ¶ fÃ¶r denna kund.{% endblock %}</p>
      </div>
    </header>

    <main class="ua-main">
      <div class="content-header">
        <span class="current-week-badge" aria-label="Aktuell vecka">Vecka {{ vm.current_week or '' }}</span>
      </div>
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="ua-flashes">
            {% for category, message in messages %}
              <div class="ua-flash ua-flash-{{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      <div class="page-content">
        {% block admin_main %}{% endblock %}
      </div>
    </main>
  </div>
</div>
{% from 'includes/yuplan_footer.html' import yuplan_footer %}
{{ yuplan_footer() }}
<div class="yp-global-footer" style="display:none"></div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='unified_ui.js') }}"></script>
<script src="{{ url_for('static', filename='js/unified_admin.js') }}"></script>
{% endblock %}
