{% from 'macros/admin_menu.html' import render_flash_messages, render_status_banner %}
<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meny Vecka {{ vm.week }}/{{ vm.year }} - Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
    <div class="admin-container">
        <h2>Meny för vecka {{ vm.week }}, {{ vm.year }}</h2>
        
        {{ render_status_banner(vm.menu_status, vm.year, vm.week, vm.etag, csrf_token_input()) }}
        
        {{ render_flash_messages() }}
        
        <!-- Menu data display -->
        {% if vm.days %}
            {% for day_name, meals in vm.days.items() %}
                <section class="admin-card">
                    <h3>{{ day_name }}</h3>
                    
                    {% if meals %}
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Måltid</th>
                                    <th>Variant</th>
                                    <th>Rätt</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for meal_name, variants in meals.items() %}
                                    {% for variant_type, info in variants.items() %}
                                        <tr>
                                            <td>{{ meal_name }}</td>
                                            <td>{{ variant_type }}</td>
                                            <td>{{ info.dish_name or '—' }}</td>
                                        </tr>
                                    {% endfor %}
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <p style="color: #666; font-style: italic;">Ingen menydata för denna dag.</p>
                    {% endif %}
                </section>
            {% endfor %}
        {% else %}
            <p style="color: #666; font-style: italic;">Ingen menydata tillgänglig för denna vecka.</p>
        {% endif %}
    </div>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
</body>
</html>
