{% extends "ui/unified_admin_base.html" %}
{% block admin_title %}Specialkost{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
{% endblock %}
{% block admin_main %}
  <section class="ua-section">
    <div class="ua-card">
      <h1>Specialkost</h1>
      <p class="admin-subtitle">Hantera kosttyper och förinställningar</p>
    </div>
  </section>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <section class="ua-section">
        <div class="ua-card">
          <div class="admin-flash-messages">
            {% for category, message in messages %}
              <div class="admin-flash admin-flash-{{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        </div>
      </section>
    {% endif %}
  {% endwith %}

  <section class="ua-section">
    <div class="ua-card">
      <div class="admin-actions" style="margin-bottom: 1rem;">
        <a href="{{ url_for('admin_ui.admin_specialkost_new') }}" class="admin-btn-primary">Lägg till ny kosttyp</a>
      </div>
    </div>
  </section>

  <section class="ua-section">
    <div class="ua-card">
      <table class="admin-table">
    <thead>
      <tr>
        <th>Namn</th>
        <th>Förinställd</th>
        <th>Åtgärder</th>
      </tr>
    </thead>
    <tbody>
      {% for dt in vm.diet_types %}
      <tr>
        <td>{{ dt.name }}</td>
        <td>{% if dt.default_select %}Ja{% else %}Nej{% endif %}</td>
        <td>
          <a href="{{ url_for('admin_ui.admin_specialkost_edit', kosttyp_id=dt.id) }}" class="admin-link-btn">Redigera</a>
          <form method="POST" action="{{ url_for('admin_ui.admin_specialkost_delete', kosttyp_id=dt.id) }}" style="display:inline;" onsubmit="return confirm('Är du säker på att du vill ta bort denna kosttyp?');">
            <button type="submit" class="admin-link-btn admin-btn-danger">Ta bort</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="3" class="admin-empty">Inga kosttyper hittades.</td>
      </tr>
      {% endfor %}
    </tbody>
      </table>
    </div>
  </section>

  <section class="ua-section">
    <div class="ua-card">
      <div class="admin-actions">
        <a href="{{ url_for('ui.admin_dashboard') }}" class="admin-btn-secondary">Tillbaka till Dashboard</a>
      </div>
    </div>
  </section>
{% endblock %}
