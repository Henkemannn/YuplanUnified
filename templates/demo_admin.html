<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Demo – Admin flows</title>
  <link rel="stylesheet" href="/static/demo.css?v={{ asset_version }}"/>
  </head>
  <body data-demo-ui-flag="{{ '1' if demo_ui_enabled else '0' }}">
    <div class="app">
      <header class="app-header">
        <div class="brand">
          <!-- Inline, themable SVG logo: uses currentColor for easy color tweaks via CSS -->
          <svg class="logo" id="ylogo" viewBox="0 0 375 375" role="img" aria-label="Yuplan" focusable="false" width="auto" height="40">
            <path fill="currentColor" fill-rule="evenodd" d="M 0 187.5 L 0 375.004 L 187.688 374.812 L 375.375 374.625 L 375.562 187.312 L 375.754 0 L 0 0 Z M 0.367 187.875 C 0.367 291 0.457 333.074 0.562 281.379 C 0.668 229.68 0.668 145.305 0.562 93.879 C 0.457 42.453 0.367 84.75 0.367 187.875 M 37.809 92.438 C 38.082 94.191 39.305 97.766 40.52 100.379 C 42.191 103.969 42.551 105.469 41.992 106.516 C 41.582 107.277 41.25 109.844 41.25 112.215 C 41.25 116.508 41.23 116.547 36.812 120.703 C 34.371 122.996 31.195 126.73 29.75 129 C 28.309 131.27 23.727 137.008 19.566 141.75 C 15.41 146.492 12.012 150.883 12.016 151.5 C 12.027 153.035 12.926 154.328 14.188 154.629 C 14.766 154.762 15.984 156.227 16.895 157.875 C 17.805 159.523 23.992 170.637 30.645 182.566 L 42.742 204.262 L 42.934 220.066 L 43.125 235.875 L 57 236.305 L 57.047 227.465 C 57.074 222.602 57.055 215.477 57.004 211.633 C 56.953 207.785 57.23 204.242 57.621 203.758 C 58.012 203.273 59.832 200.176 61.664 196.875 C 63.496 193.574 68.375 184.801 72.504 177.375 C 76.633 169.949 80.961 162.109 82.117 159.949 C 83.953 156.531 84.453 156.086 86.016 156.477 C 88.141 157.012 90.75 155 90.75 152.828 C 90.75 152.039 83.578 142.785 74.812 132.27 C 66.047 121.75 58.773 112.859 58.645 112.508 C 58.52 112.156 59.98 109.742 61.898 107.141 C 66.52 100.863 67.094 99.75 65.715 99.75 C 65.117 99.75 62.883 101.945 60.75 104.625 C 58.617 107.305 56.562 109.5 56.184 109.5 C 54.684 109.5 55.676 107.293 59.242 102.699 C 61.301 100.047 62.988 97.621 62.992 97.312 C 63.012 95.816 61.316 97.152 58.008 101.246 C 54.758 105.27 52.5 106.863 52.5 105.137 C 52.5 104.797 54.164 102.367 56.203 99.738 C 58.238 97.105 59.703 94.629 59.457 94.23 C 59.012 93.508 56.945 95.539 53.09 100.492 C 51.645 102.355 50.824 102.875 50.254 102.301 C 49.68 101.73 50.426 100.238 52.848 97.117 C 55.762 93.367 57.039 90.75 55.953 90.75 C 55.793 90.75 53.844 92.625 51.625 94.918 L 47.586 99.086 L 43.645 94.168 C 38.91 88.258 37.066 87.711 37.809 92.438 M 45.375 124.613 C 39.121 126.91 35.25 132.566 35.25 139.391 C 35.25 154.172 54.047 159.949 62.625 147.805 C 64.629 144.965 64.875 144.023 64.875 139.125 C 64.875 134.227 64.629 133.285 62.625 130.445 C 61.387 128.691 59.07 126.586 57.477 125.762 C 54.039 123.984 48.516 123.461 45.375 124.613 M 44.375 127.609 C 36.719 131.398 34.707 141.176 40.234 147.742 C 47.742 156.664 63.051 151.266 63.227 139.641 C 63.305 134.566 60.391 129.684 56.023 127.57 C 51.891 125.57 48.473 125.582 44.375 127.609 M 71.832 146.148 C 70.254 151.516 65.539 157.07 60.277 159.758 C 57.223 161.32 55.586 161.621 50.25 161.605 C 44.832 161.594 43.305 161.293 40.078 159.602 C 34.289 156.574 30.801 152.32 27.984 144.852 C 27.352 143.176 27.074 143.391 23.016 148.789 L 18.715 154.5 L 31.961 154.5 L 33.461 157.688 C 35.645 162.32 49.637 189.277 50.199 189.926 C 50.461 190.227 54.715 182.465 59.652 172.676 L 68.625 154.875 L 83.156 154.125 L 78.664 148.125 C 76.195 144.824 73.938 142.039 73.648 141.938 C 73.359 141.836 72.543 143.73 71.832 146.148 M 209.25 194.625 L 209.25 236.25 L 222.75 236.25 L 222.75 153 L 209.25 153 Z M 166.785 182.258 C 164.676 183.098 161.723 184.973 160.223 186.426 L 157.5 189.07 L 157.5 182.25 L 143.25 182.25 L 143.25 264.75 L 157.5 264.75 L 157.5 230.93 L 160.32 233.195 C 167.773 239.184 181.449 239.219 190.094 233.273 C 203.961 223.73 205.559 199.043 193.055 187.512 C 188.172 183.016 183.816 181.285 176.625 180.988 C 171.934 180.793 169.789 181.07 166.785 182.262 M 249.746 181.777 C 247.887 182.312 245.578 183.172 244.617 183.688 C 242.367 184.891 237 189.73 237 190.555 C 237 190.902 238.512 192.074 240.359 193.156 C 243.699 195.113 243.73 195.117 245.797 193.715 C 250.82 190.305 257.109 189.48 262.133 191.578 C 264.906 192.738 267.742 196.609 267.746 199.238 C 267.75 200.977 265.945 201.582 255.75 203.266 C 243.969 205.211 237.812 208.109 234.449 213.293 C 232.871 215.73 232.5 217.207 232.5 221.062 C 232.5 228.707 235.852 233.652 242.793 236.246 C 250.125 238.992 259.242 237.77 264.809 233.293 C 266.379 232.031 267.77 231 267.902 231 C 268.031 231 268.137 232.098 268.133 233.438 L 268.125 235.875 L 274.688 236.09 L 281.25 236.309 L 281.246 216.215 C 281.242 204.367 280.914 194.949 280.445 193.258 C 279.344 189.293 275.23 185.004 270.555 182.957 C 265.777 180.863 255.027 180.254 249.746 181.777 M 316.125 181.609 C 313.316 182.648 309.148 185.641 306.965 188.188 L 305.305 190.125 L 305.25 182.25 L 291 182.25 L 291 236.25 L 305.133 236.25 L 305.379 218.004 L 305.625 199.762 L 307.648 196.707 C 312.145 189.914 322.426 189.609 326.707 196.145 C 327.766 197.758 327.914 200.461 327.805 215.855 C 327.734 225.664 327.898 234.27 328.172 234.973 C 328.582 236.043 329.738 236.25 335.332 236.25 L 342 236.25 L 342 216.094 C 342 194.305 341.676 192.039 337.816 186.98 C 334.902 183.16 330.574 181.293 324 181.016 C 320.906 180.887 317.363 181.152 316.125 181.609 M 82.473 187.312 C 82.352 209.016 82.668 223.566 83.316 225.98 C 86.449 237.668 105.047 241.648 115.344 232.832 L 118.5 230.133 L 118.5 236.25 L 132.75 236.25 L 132.75 182.25 L 118.5 182.25 L 118.5 200.273 C 118.5 219.738 118.211 221.492 114.461 224.953 C 111.863 227.352 104.898 228.012 101.383 226.195 C 96.73 223.789 96.402 222.211 96.141 201.188 L 95.906 182.25 L 82.5 182.25 Z M 166.125 192.312 C 160.262 194.93 157.5 200.812 157.5 210.684 C 157.5 222.172 161.789 227.211 171.594 227.238 C 179.883 227.258 185.129 223.133 186.816 215.258 C 189.059 204.816 184.539 194.164 176.949 191.984 C 173.418 190.973 168.816 191.113 166.125 192.312 M 261 210.32 C 253.824 211.648 250.996 212.777 248.625 215.25 C 245.613 218.395 245.777 223.016 249 225.938 C 250.926 227.684 251.934 228 255.574 227.996 C 263.809 227.992 267.742 223.691 267.746 214.688 C 267.75 210.793 267.484 209.273 266.812 209.336 C 266.297 209.379 263.68 209.824 261 210.32 "/>
          </svg>
          <h1>Yuplan Unified</h1>
        </div>
        <div class="controls">
          <label>Vecka
            <select id="header-week-select"></select>
          </label>
          <label>Avdelning
            <select id="header-dept-select"></select>
          </label>
        </div>
      </header>
      <div class="app-body">
        <aside class="app-nav" role="navigation" aria-label="Huvudmeny">
          <a id="nav-weekview" href="#weekview" class="nav-link" aria-current="page">Veckovy</a>
          <a id="nav-admin"   href="#admin"   class="nav-link">Admin</a>
 feat/menu-choice-pass-b
          <a id="nav-menyval" href="#menyval" class="nav-link">Menyval</a>

          <a id="nav-alt2"    href="#alt2"    class="nav-link">Alt 2</a>
 master
          <a id="nav-report"  href="#report"  class="nav-link">Rapport</a>
        </aside>
        <main class="app-main">
    <section id="panel-weekview" class="panel panel--active" role="region" aria-labelledby="nav-weekview" data-panel="weekview">
      <div class="card">
        <h3>Weekview</h3>
        <p class="muted">Placeholder for weekview demo.</p>
      </div>
    </section>

  <section id="panel-admin" class="panel" role="region" aria-labelledby="nav-admin" data-panel="admin" hidden>
      <div class="card">
        <h3>1) Login (simple)</h3>
        <p class="muted">Sends POST /auth/login {role:"admin"}. Required for cookies and CSRF token.</p>
        <button id="btnLogin">Login as admin</button>
        <span id="loginStatus"></span>
      </div>

      <div class="row">
        <div class="card">
          <h3>2) Departments (ETag and If-None-Match)</h3>
          <label>Site ID <input id="siteId" type="text" placeholder="enter site_id" /></label>
          <div>
            <button id="btnLoadDepts">Load departments</button>
            <button id="btnDepts304">Conditional GET (If-None-Match)</button>
          </div>
          <div class="muted">Collection ETag: <span id="deptsEtag" class="et">—</span></div>
          <div id="depts"></div>
          <div style="margin-top:.5rem">
            <label>Rename first department to <input id="deptNewName" type="text" placeholder="New name"/></label>
            <button id="btnRename">PUT with If-Match</button>
            <span id="renameStatus"></span>
          </div>
        </div>
      </div>
    </section>

 feat/menu-choice-pass-b
  <section id="panel-menyval" class="panel" role="region" aria-labelledby="nav-menyval" data-panel="menyval" hidden>
      <div class="card">
        <h3>3) Menyval (Alt2 mån–fre; helg Alt1)</h3>
        <div id="menyvalStatus" class="muted" aria-live="polite"></div>
        <div id="menyvalFlash" class="flash" aria-live="polite" hidden></div>
        <div id="menyvalControls" class="menyval-controls" aria-describedby="menyvalHelp"></div>
        <p id="menyvalHelp" class="muted">Välj vecka och avdelning uppe i headern. Alt 2 är inte tillgängligt på helger.</p>
        <div class="muted">ETag: <span id="menyvalEtag" class="et">—</span></div>
      </div>
    </section>


 master
  <section id="panel-alt2" class="panel" role="region" aria-labelledby="nav-alt2" data-panel="alt2" hidden>
      <div class="card">
        <h3>3) Menyval (idempotent PUT + toggle)</h3>
        <label>Week <input id="week" type="number" value="51" min="1" max="53"/></label>
        <div>
          <button id="btnLoadAlt2">Load Alt2</button>
          <button id="btnAlt2304">Conditional GET (If-None-Match)</button>
        </div>
        <div class="muted">Collection ETag: <span id="alt2Etag" class="et">—</span></div>
        <div id="alt2"></div>
        <div style="margin-top:.5rem">
          <button id="btnAlt2Idem">PUT idempotent (no change)</button>
          <button id="btnAlt2Toggle">Toggle first item</button>
          <span id="alt2Status"></span>
        </div>
      </div>
    </section>

  <section id="panel-report" class="panel" role="region" aria-labelledby="nav-report" data-panel="report" hidden>
      <header class="panel-hdr">
        <h2>Rapport</h2>
        <div class="inline-controls">
          <label for="reportWeek">Vecka</label>
          <input id="reportWeek" type="number" min="1" max="53" />
          <button id="btnLoadReport" class="btn">Läs in</button>
          <button id="btnExportCsv" class="btn" aria-label="Exportera CSV">Export CSV</button>
          <button id="btnExportPdf" class="btn" aria-label="Exportera PDF">Export PDF</button>
        </div>
      </header>
      <div id="reportSummary" class="report-cards"></div>
    </section>

        </main>
      </div>
    </div>
  <script src="/static/demo.js?v={{ asset_version }}" defer></script>
  </body>
</html>
