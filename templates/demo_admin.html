<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Demo – Admin flows</title>
  <link rel="stylesheet" href="/static/demo.css?v={{ asset_version }}"/>
  </head>
  <body data-demo-ui-flag="{{ '1' if demo_ui_enabled else '0' }}">
    <div class="app">
      <header class="app-header">
        <div class="brand">
          <img src="/static/img/logo.svg?v={{ asset_version }}" alt="Yuplan" class="logo" id="ylogo" />
          <div id="ymark" aria-hidden="true">Y</div>
          <h1>Yuplan Unified</h1>
        </div>
        <div class="controls">
          <label>Vecka
            <select id="header-week-select"></select>
          </label>
          <label>Avdelning
            <select id="header-dept-select"></select>
          </label>
        </div>
      </header>
      <div class="app-body">
        <aside class="app-nav" role="navigation" aria-label="Huvudmeny">
          <a id="nav-weekview" href="#weekview" class="nav-link" aria-current="page">Veckovy</a>
          <a id="nav-admin"   href="#admin"   class="nav-link">Admin</a>
          <a id="nav-alt2"    href="#alt2"    class="nav-link">Alt 2</a>
          <a id="nav-report"  href="#report"  class="nav-link">Rapport</a>
        </aside>
        <main class="app-main">
    <section id="panel-weekview" class="panel panel--active" role="region" aria-labelledby="nav-weekview" data-panel="weekview">
      <div class="card">
        <h3>Weekview</h3>
        <p class="muted">Placeholder for weekview demo.</p>
      </div>
    </section>

  <section id="panel-admin" class="panel" role="region" aria-labelledby="nav-admin" data-panel="admin" hidden>
      <div class="card">
        <h3>1) Login (simple)</h3>
        <p class="muted">Sends POST /auth/login {role:"admin"}. Required for cookies and CSRF token.</p>
        <button id="btnLogin">Login as admin</button>
        <span id="loginStatus"></span>
      </div>

      <div class="row">
        <div class="card">
          <h3>2) Departments (ETag and If-None-Match)</h3>
          <label>Site ID <input id="siteId" type="text" placeholder="enter site_id" /></label>
          <div>
            <button id="btnLoadDepts">Load departments</button>
            <button id="btnDepts304">Conditional GET (If-None-Match)</button>
          </div>
          <div class="muted">Collection ETag: <span id="deptsEtag" class="et">—</span></div>
          <div id="depts"></div>
          <div style="margin-top:.5rem">
            <label>Rename first department to <input id="deptNewName" type="text" placeholder="New name"/></label>
            <button id="btnRename">PUT with If-Match</button>
            <span id="renameStatus"></span>
          </div>
        </div>
      </div>
    </section>

  <section id="panel-alt2" class="panel" role="region" aria-labelledby="nav-alt2" data-panel="alt2" hidden>
      <div class="card">
        <h3>3) Menyval (idempotent PUT + toggle)</h3>
        <label>Week <input id="week" type="number" value="51" min="1" max="53"/></label>
        <div>
          <button id="btnLoadAlt2">Load Alt2</button>
          <button id="btnAlt2304">Conditional GET (If-None-Match)</button>
        </div>
        <div class="muted">Collection ETag: <span id="alt2Etag" class="et">—</span></div>
        <div id="alt2"></div>
        <div style="margin-top:.5rem">
          <button id="btnAlt2Idem">PUT idempotent (no change)</button>
          <button id="btnAlt2Toggle">Toggle first item</button>
          <span id="alt2Status"></span>
        </div>
      </div>
    </section>

  <section id="panel-report" class="panel" role="region" aria-labelledby="nav-report" data-panel="report" hidden>
      <header class="panel-hdr">
        <h2>Rapport</h2>
        <div class="inline-controls">
          <label for="reportWeek">Vecka</label>
          <input id="reportWeek" type="number" min="1" max="53" />
          <button id="btnLoadReport" class="btn">Läs in</button>
          <button id="btnExportCsv" class="btn" aria-label="Exportera CSV">Export CSV</button>
        </div>
      </header>
      <div id="reportSummary" class="report-cards"></div>
    </section>

        </main>
      </div>
    </div>
  <script src="/static/demo.js?v={{ asset_version }}" defer></script>
  </body>
</html>
