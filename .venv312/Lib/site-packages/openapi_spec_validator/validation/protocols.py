from collections.abc import Hashable, Iterator, Mapping
from typing import Any, Protocol, runtime_checkable

from openapi_spec_validator.validation.exceptions import OpenAPIValidationError


@runtime_checkable
class SupportsValidation(Protocol):
    def is_valid(self, instance: Mapping[Hashable, Any]) -> bool:
        ...

    def iter_errors(
        self,
        instance: Mapping[Hashable, Any],
        base_uri: str = "",
        spec_url: str | None = None,
    ) -> Iterator[OpenAPIValidationError]:
        ...

    def validate(
        self,
        instance: Mapping[Hashable, Any],
        base_uri: str = "",
        spec_url: str | None = None,
    ) -> None:
        ...
