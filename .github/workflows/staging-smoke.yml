name: staging-smoke

on:
  workflow_dispatch:

jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.12'
          cache: 'pip'
      - name: Ruff (core only)
        run: |
          python -m pip install --upgrade pip
          pip install ruff==0.6.3
          ruff check core
      - name: Setup PowerShell
        uses: PowerShell/PowerShell@v1
        with:
          version: 'latest'
      - name: Run smoke against staging
        run: pwsh -File scripts/smoke.ps1 -BaseUrl https://yuplan-unified-staging.fly.dev -SiteId 5f8e2aea-9060-4981-9686-c70dbc723a11 -Week 51
