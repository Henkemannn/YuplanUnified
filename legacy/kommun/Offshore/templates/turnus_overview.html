{% extends "layout.html" %}
{% block content %}
<h2>Översikt – Kokk 1–6</h2>
<p class="text-muted">Kommande perioder per virtuell kock. Visar upp till 2 hela perioder per kock.</p>
<p>
  <a class="btn btn-sm btn-secondary" href="{{ url_for('turnus_mapping') }}">Koble Kokk 1–6 → brukere</a>
  <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('turnus_rebind') }}">Tildel vikar i tidsrom</a>
  <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('turnus_simple') }}">Til enkel generator</a>
  <form class="d-inline ms-2" method="post" action="{{ url_for('turnus_cleanup') }}">
    <input type="hidden" name="action" value="dedupe">
    <button type="submit" class="btn btn-sm btn-outline-danger">Fjern duplikater</button>
  </form>
  <form class="d-inline ms-2" method="post" action="{{ url_for('turnus_cleanup') }}">
    <input type="hidden" name="action" value="clear_future">
    <input type="date" name="from_date" class="form-control form-control-sm d-inline" style="width: 160px;" placeholder="YYYY-MM-DD">
    <button type="submit" class="btn btn-sm btn-outline-warning">Slett framtid</button>
  </form>
  <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('admin_users') }}">Administrer brukere</a>
  
</p>
<div class="table-responsive">
  <table class="table table-sm align-middle">
    <thead>
      <tr>
    <th>Kokk</th>
    <th>Arbetsperioder (från – till)</th>
      </tr>
    </thead>
    <tbody>
      {% for row in overview %}
        <tr>
          <td><strong>{{ row.role }}</strong></td>
          <td>
            {% if row.periods %}
              <ul class="mb-0">
              {% for p in row.periods %}
                <li>{{ p.start_date }} – {{ p.end_date }}</li>
              {% endfor %}
              </ul>
            {% else %}
              <span class="text-muted">Ingen kommende perioder</span>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <p class="text-muted small mt-3">Förklaring: "pass" = enskild arbetstid (t.ex. 07–19 eller 19–07). "snu" = kortare skift för att byta från natt till dag eller tvärtom.</p>
</div>
{% endblock %}
