{% extends "layout.html" %}
{% block content %}
<h2>Koble virtuelle kokker (Kokk 1–6) til brukere</h2>
<p>Rigg: {{ rig_name }}</p>

<form method="post" action="{{ url_for('turnus_mapping_save') }}" class="mb-4">
  <div class="row g-3">
    {% for role in roles %}
      <div class="col-md-6">
        <label class="form-label">{{ role }}</label>
        <select class="form-select" name="kokk_{{ loop.index }}">
          <option value="">-- Ikke tilordnet --</option>
          {% for u in users %}
            <option value="{{ u.id }}" {% if mapping.get(role) == u.id %}selected{% endif %}>{{ u.name or u.email }} (id {{ u.id }})</option>
          {% endfor %}
        </select>
      </div>
    {% endfor %}
  </div>
  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" name="apply_now" id="apply_now" checked>
    <label class="form-check-label" for="apply_now">Bruk kobling nå (opprett bindinger for ubundne slots)</label>
  </div>
  <div class="form-check">
    <input class="form-check-input" type="checkbox" name="rebind_all" id="rebind_all">
    <label class="form-check-label" for="rebind_all">Fjern eksisterende bindinger for Kokk-roller og bind på nytt</label>
  </div>
  <button type="submit" class="btn btn-primary mt-3">Lagre kobling</button>
  <a href="{{ url_for('turnus_overview') }}" class="btn btn-outline-secondary mt-3">Til oversiktsvisning</a>
</form>

{% endblock %}
